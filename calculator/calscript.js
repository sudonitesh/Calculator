var drainage;function init(){turnCalcOff(),$.mobile.loading().hide(),$(document).keyup(turnCalcOn),$('button.number').on('tap',enterNumber)}function powerButton(){fBtnPressed=!1,'rgb(0, 0, 0)'===$('#power-btn').css('color')?turnCalcOn():turnCalcOff()}function turnCalcOn(){clearAll(),power=!0,$('#input-window').css('background-color','#c3c2ab'),$('#battery').css('visibility','visible'),$('#power-btn').css('color','red');var a=5;drainage=setInterval(()=>{a--,$('#battery').addClass('fa fa-battery-'+a+' fa-stack-1x'),0==a&&(a=5)},5e3)}function turnCalcOff(){clearInterval(drainage),clearAll(),power=!1,$('#input-window').css('background-color','lightgray'),$('#battery').css('visibility','hidden'),$('#power-btn').css('color','black')}function clearButton(){fBtnPressed=!1,''!==$('#input-window').val()&&'C'===$('#clear').text()?($('#clear').text('AC'),clearEntry()):clearAll()}function clearEntry(){$('#input-window').val('')}function clearAll(){$('#clear').text('C'),$('#input-window').val(''),$('#formula').text('')}function prerequisites(){fBtnPressed=!1,!1===power&&turnCalcOn(),!0===clear&&(clear=!1,clearEntry(),$('#clear').text('C'))}function enterNumber(){if(prerequisites(),'0'===$('#input-window').val())return void $('#input-window').val('0.');var a=$('#input-window').val();(a.indexOf('.')&&0>a.indexOf('-')&&10>a.length||0<(a.indexOf('.')&&a.indexOf('-'))&&12>a.length||-1<(a.indexOf('.')||a.indexOf('-'))&&11>a.length)&&$('#input-window').val($('#input-window').val()+this.id)}function decimal(){prerequisites();var a=$('#input-window').val();10<=a.toString().length||(!a&&$('#input-window').val('0'),0>a.indexOf('.')&&$('#input-window').val($('#input-window').val()+'.'))}function plusmin(){''===$('#input-window').val()||(result=eval($('#input-window').val()+'*-1'),formatNumber(result))}function percent(){if(''!==$('#formula').text()&&!0!==fBtnPressed){fBtnPressed=!0,clear=!0;var A=$('#formula').html().match(/((\d|\.)+)(?!.*\d)/),B=$('#input-window').val(),result=eval(A[0]*(B/100));formatNumber(result)}}function operate(operator){if(''!==$('#input-window').val())if(!0===fBtnPressed){var formula=$('#formula').html().replace(/(\+|\-|\*|\/)$/,operator);$('#formula').html(formula)}else fBtnPressed=!0,clear=!0,$('#formula').text($('#formula').text()+$('#input-window').val()),result=eval($('#formula').text()),formatNumber(result),$('#formula').html($('#formula').text()+operator)}function equals(){if(fBtnPressed=!1,''!==$('#input-window').val()){var input=$('#input-window').val();0>input?$('#formula').text($('#formula').text()+'('+-1*input+'*-1)'):$('#formula').html($('#formula').text()+$('#input-window').val());var result=eval($('#formula').text());clear=!0,$('#formula').text(''),formatNumber(result)}}function formatNumber(a){if(a=a.toString(),-1<a.indexOf('e')){var b=a.split('e'),c=(+b[0]).toFixed(5);a=c+'e'+b[1],update(a)}12>=a.length&&-1<a.indexOf('.')&&-1<a.indexOf('-')||11>=a.length&&(-1<a.indexOf('.')||-1<a.indexOf('-'))||10>=a.length?update(a):10<a.length&&0>a.indexOf('-')&&(0>a.indexOf('.')||9<a.indexOf('.'))||11<a.length&&-1<a.indexOf('-')&&(0>a.indexOf('.')||10<a.indexOf('.'))?(a=(+a).toExponential(5),update(a)):-1<a.indexOf('-')?(a=(+a).toFixed(11-a.indexOf('.')),update(a)):0>a.indexOf('-')&&(a=(+a).toFixed(10-a.indexOf('.')),update(a))}function update(a){-1<a.indexOf('.')&&0>a.indexOf('e')&&(a=a.replace(/0+$/,''),'.'===a.charAt(a.length-1)&&(a=a.replace('.',''))),$('#input-window').val(a)}$(document).ready(init);
